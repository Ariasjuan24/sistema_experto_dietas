% Hechos: Información sobre alimentos
% alimento(Nombre, Calorías por 100g, Proteínas (g), Grasas (g), Carbohidratos (g))
alimento('Manzana', 52, 0.3, 0.2, 14).
alimento('Pechuga de pollo', 165, 31, 3.6, 0).
alimento('Arroz integral', 123, 2.9, 1, 26).
alimento('Espinacas', 23, 2.9, 0.4, 3.6).
alimento('Yogur natural', 59, 10, 0.4, 3.6).
alimento('Avena', 389, 16.9, 6.9, 66.3).
alimento('Plátano', 89, 1.1, 0.3, 22.8).
alimento('Salmón', 206, 22, 13, 0).
alimento('Almendras', 576, 21, 49, 22).
alimento('Brócoli', 34, 2.8, 0.4, 6.6).
alimento('Huevos', 155, 13, 11, 1.1).
alimento('Leche descremada', 42, 3.4, 0.1, 5).
alimento('Pan integral', 247, 13, 4.2, 41).
alimento('Quinoa', 120, 4.1, 1.9, 21.3).
alimento('Aceite de oliva', 884, 0, 100, 0).
alimento('Aguacate', 160, 2, 15, 9).
alimento('Almejas', 74, 12.6, 1.1, 3.6).
alimento('Ananas', 50, 0.5, 0.1, 13).
alimento('Apio', 16, 0.7, 0.2, 3.2).
alimento('Atún', 132, 28, 1, 0).
alimento('Betabel', 43, 1.6, 0.2, 9.6).
alimento('Calabaza', 26, 1, 0.1, 6.5).
alimento('Camarones', 85, 18, 1.7, 0).
alimento('Cebolla', 40, 1.1, 0.1, 9.3).
alimento('Cerezas', 63, 1, 0.2, 16).
alimento('Chía', 486, 16.5, 30.7, 42.1).
alimento('Coco', 354, 3.3, 33.5, 15.2).
alimento('Col rizada', 49, 4.3, 0.9, 8.8).
alimento('Coliflor', 25, 1.9, 0.3, 4.9).
alimento('Fresas', 32, 0.7, 0.3, 7.7).
alimento('Garbanzos', 164, 8.9, 2.6, 27.4).
alimento('Guisantes', 81, 5.4, 0.4, 14.5).
alimento('Habas', 88, 7.6, 0.4, 16.3).
alimento('Huevo de codorniz', 158, 13, 11, 1.1).
alimento('Jamón de pavo', 135, 19, 7.5, 1).
alimento('Kiwis', 61, 1.1, 0.5, 14.7).
alimento('Leche de almendra', 13, 0.4, 1.1, 0.2).
alimento('Leche de coco', 230, 2.3, 24.3, 6.3).
alimento('Lechuga', 15, 1, 0.2, 3).
alimento('Lentejas', 116, 9, 0.4, 20).
alimento('Lima', 30, 0.7, 0.2, 10.5).
alimento('Mandarina', 53, 0.8, 0.2, 13.3).
alimento('Manteca de cerdo', 902, 0, 100, 0).
alimento('Melón', 34, 0.9, 0.2, 8.6).
alimento('Menta', 70, 3.8, 0.9, 14.5).
alimento('Moras', 43, 1, 0.5, 10.4).
alimento('Nueces', 654, 15.2, 65.2, 13.7).
alimento('Pepino', 15, 0.7, 0.1, 3.6).
alimento('Pechuga de pollo', 165, 31, 3.6, 0).
alimento('Peras', 57, 0.4, 0.1, 15.2).
alimento('Piña', 50, 0.5, 0.1, 13).
alimento('Pistachos', 562, 20, 45, 28).
alimento('Plátano', 89, 1.1, 0.3, 22.8).
alimento('Pochas', 108, 8, 0.6, 20.2).
alimento('Requesón', 174, 11, 13, 3.4).
alimento('Salmón', 206, 22, 13, 0).
alimento('Sandía', 30, 0.6, 0.2, 7.6).
alimento('Tomate', 18, 0.9, 0.2, 3.9).
alimento('Tofu', 144, 15, 9, 3.9).
alimento('Trucha', 148, 19.5, 8.1, 0).
alimento('Uvas', 69, 0.7, 0.2, 18.1).
alimento('Yogur natural', 59, 10, 0.4, 3.6).
alimento('Zanahoria', 41, 0.9, 0.2, 9.6).
alimento('Albahaca', 23, 2.2, 0.6, 2.7).
alimento('Almendra', 576, 21, 49, 22).
alimento('Apio', 16, 0.7, 0.2, 3.2).
alimento('Camarones', 85, 18, 1.7, 0).
alimento('Cebolla', 40, 1.1, 0.1, 9.3).
alimento('Cereal de avena', 389, 16.9, 6.9, 66.3).
alimento('Chía', 486, 16.5, 30.7, 42.1).
alimento('Coco', 354, 3.3, 33.5, 15.2).
alimento('Dátiles', 277, 1.8, 0.2, 75).
alimento('Garbanzos', 164, 8.9, 2.6, 27.4).
alimento('Guisantes', 81, 5.4, 0.4, 14.5).
alimento('Habas', 88, 7.6, 0.4, 16.3).
alimento('Huevo de codorniz', 158, 13, 11, 1.1).
alimento('Lentejas', 116, 9, 0.4, 20).
alimento('Manteca de cerdo', 902, 0, 100, 0).
alimento('Nueces', 654, 15.2, 65.2, 13.7).
alimento('Pechuga de pollo', 165, 31, 3.6, 0).
alimento('Pistachos', 562, 20, 45, 28).
alimento('Salmón', 206, 22, 13, 0).
alimento('Tofu', 144, 15, 9, 3.9).
alimento('Trucha', 148, 19.5, 8.1, 0).

% Hechos: Dietas predefinidas
dieta('Dieta para Diabetes', ['Manzana', 'Pechuga de pollo', 'Espinacas', 'Yogur natural', 'Brócoli', 'Almendras', 'Aguacate', 'Atún', 'Piña', 'Apio', 'Cebolla', 'Tomate', 'Pepino', 'Guisantes', 'Habas']).
dieta('Dieta para Hipertensión', ['Arroz integral', 'Espinacas', 'Pechuga de pollo', 'Plátano', 'Brócoli', 'Almejas', 'Guisantes', 'Cebolla', 'Tomate', 'Requesón', 'Lima', 'Peras', 'Apio']).
dieta('Dieta para Colesterol alto', ['Espinacas', 'Manzana', 'Yogur natural', 'Salmón', 'Avena', 'Almendras', 'Requesón', 'Coco', 'Aguacate', 'Kiwis', 'Moras', 'Fresas', 'Pistachos']).
dieta('Dieta Balanceada', ['Arroz integral', 'Pechuga de pollo', 'Manzana', 'Huevos', 'Quinoa', 'Pistachos', 'Brócoli', 'Fresas', 'Menta', 'Garbanzos', 'Tomate', 'Aguacate']).
dieta('Dieta para Pérdida de Peso', ['Espinacas', 'Brócoli', 'Huevos', 'Manzana', 'Leche descremada', 'Tomate', 'Cebolla', 'Fresas', 'Almendras', 'Pepino', 'Guisantes', 'Lima', 'Peras']).
dieta('Dieta para Aumento de Masa Muscular', ['Pechuga de pollo', 'Huevos', 'Quinoa', 'Leche descremada', 'Salmón', 'Garbanzos', 'Requesón', 'Almendras', 'Tofu', 'Aguacate', 'Pistachos', 'Coco']).
dieta('Dieta Vegana', ['Avena', 'Almendras', 'Espinacas', 'Quinoa', 'Brócoli', 'Guisantes', 'Habas', 'Frutos rojos', 'Pepino', 'Lentejas', 'Tomate', 'Fresas', 'Moras']).
dieta('Dieta Mediterránea', ['Salmón', 'Aceite de oliva', 'Brócoli', 'Manzana', 'Almendras', 'Tomate', 'Fresas', 'Requesón', 'Moras', 'Pistachos', 'Lima', 'Kiwis']).
dieta('Dieta DASH', ['Espinacas', 'Pechuga de pollo', 'Yogur natural', 'Brócoli', 'Arroz integral', 'Plátano', 'Lentejas', 'Almejas', 'Menta', 'Cebolla', 'Peras', 'Fresas']).
dieta('Dieta Cetogénica', ['Pechuga de pollo', 'Huevos', 'Aguacate', 'Almendras', 'Aceite de oliva', 'Pistachos', 'Requesón', 'Salmón', 'Leche de almendra', 'Coco', 'Pepino', 'Zanahoria']).
dieta('Dieta Anti-inflamatoria', ['Salmón', 'Brócoli', 'Frutos rojos', 'Aceite de oliva', 'Aguacate', 'Coco', 'Kiwis', 'Moras', 'Col rizada', 'Cebolla', 'Mandarina', 'Ananas']).
dieta('Dieta Baja en Carbohidratos', ['Pechuga de pollo', 'Espinacas', 'Huevos', 'Aguacate', 'Salmón', 'Almendras', 'Cebolla', 'Pepino', 'Tomate', 'Requesón', 'Peras', 'Fresas', 'Guisantes']).



% Hechos: Condiciones de salud y sus dietas recomendadas
condicion_dieta('Diabetes', 'Dieta para Diabetes').
condicion_dieta('Hipertensión', 'Dieta para Hipertensión').
condicion_dieta('Colesterol alto', 'Dieta para Colesterol alto').
condicion_dieta('Sobrepeso', 'Dieta para Pérdida de Peso').
condicion_dieta('Obesidad', 'Dieta para Pérdida de Peso').
condicion_dieta('Aumento muscular', 'Dieta para Aumento de Masa Muscular').
condicion_dieta('Vegano', 'Dieta Vegana').
condicion_dieta('Normal', 'Dieta Balanceada').
condicion_dieta('Mediterranea', 'Dieta Mediterránea').
condicion_dieta('DASH', 'Dieta DASH').
condicion_dieta('Cetogenica', 'Dieta Cetogénica').
condicion_dieta('Anti-inflamatoria', 'Dieta Anti-inflamatoria').
condicion_dieta('Baja en carbohidratos', 'Dieta Baja en Carbohidratos').

% Regla: Recomendar una dieta completa en función de la condición de salud y calorías objetivo
recomendar_dieta(Condicion, CaloriasObjetivo, Dieta, DietaAjustada) :-
    condicion_dieta(Condicion, Dieta),
    dieta(Dieta, Alimentos),
    ajustar_dieta(Alimentos, CaloriasObjetivo, DietaAjustada).

% Regla: Ajustar dietas según calorías objetivo
ajustar_dieta(Alimentos, CaloriasObjetivo, DietaAjustada) :-
    incluir_calorias(Alimentos, 0, CaloriasTotales),
    CaloriasTotales =< CaloriasObjetivo,
    DietaAjustada = Alimentos.

% Calcular calorías totales de una lista de alimentos
incluir_calorias([], Calorias, Calorias).
incluir_calorias([Alimento|Resto], CaloriasAcumuladas, CaloriasTotales) :-
    alimento(Alimento, CaloriasAlimento, _, _, _),
    CaloriasNuevas is CaloriasAcumuladas + CaloriasAlimento,
    incluir_calorias(Resto, CaloriasNuevas, CaloriasTotales).

% Regla: Sugerir alimentos adicionales si las calorías de la dieta ajustada son muy bajas
sugerir_alimentos(AlimentosBase, CaloriasObjetivo, AlimentosFinales) :-
    incluir_calorias(AlimentosBase, 0, CaloriasTotales),
    CaloriasTotales < CaloriasObjetivo,
    findall(Alimento, alimento(Alimento, _, _, _, _), TodosLosAlimentos),
    seleccionar_alimentos(TodosLosAlimentos, AlimentosBase, CaloriasObjetivo, AlimentosFinales).

seleccionar_alimentos([], Alimentos, _, Alimentos).
seleccionar_alimentos([Alimento|Resto], AlimentosActuales, CaloriasObjetivo, AlimentosFinales) :-
    \+ member(Alimento, AlimentosActuales),
    alimento(Alimento, CaloriasAlimento, _, _, _),
    incluir_calorias(AlimentosActuales, CaloriasAcumuladas, _),
    CaloriasAcumuladas + CaloriasAlimento =< CaloriasObjetivo,
    seleccionar_alimentos(Resto, [Alimento|AlimentosActuales], CaloriasObjetivo, AlimentosFinales).
seleccionar_alimentos([_|Resto], AlimentosActuales, CaloriasObjetivo, AlimentosFinales) :-
    seleccionar_alimentos(Resto, AlimentosActuales, CaloriasObjetivo, AlimentosFinales).
